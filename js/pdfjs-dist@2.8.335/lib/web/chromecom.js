"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,f=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var i,a,c,s,n=t&&t.prototype instanceof d?t:d,l=Object.create(n.prototype),u=new U(o||[]);return f(l,"_invoke",{value:(i=e,a=r,c=u,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return P()}for(c.method=e,c.arg=t;;){var r=c.delegate;if(r){var o=L(r,c);if(o){if(o===h)continue;return o}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===s)throw s="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s="executing";var n=p(i,a,c);if("normal"===n.type){if(s=c.done?"completed":"suspendedYield",n.arg===h)continue;return{value:n.arg,done:c.done}}"throw"===n.type&&(s="completed",c.method="throw",c.arg=n.arg)}})}),l}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var h={};function d(){}function s(){}function l(){}var m={};i(m,n,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==e&&u.call(v,n)&&(m=v);var g=l.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function b(s,l){var t;f(this,"_invoke",{value:function(r,o){function e(){return new l(function(e,t){!function t(e,r,o,n){var i=p(s[e],s,r);if("throw"!==i.type){var a=i.arg,c=a.value;return c&&"object"==_typeof(c)&&u.call(c,"__await")?l.resolve(c.__await).then(function(e){t("next",e,o,n)},function(e){t("throw",e,o,n)}):l.resolve(c).then(function(e){a.value=e,o(a)},function(e){return t("throw",e,o,n)})}n(i.arg)}(r,o,e,t)})}return t=t?t.then(e,e):e()}})}function L(e,t){var r=t.method,o=e.iterator[r];if(void 0===o)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,L(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var n=p(o,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(u.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return f(g,"constructor",{value:s.prototype=l,configurable:!0}),f(l,"constructor",{value:s,configurable:!0}),s.displayName=i(l,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,i(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},a.awrap=function(e){return{__await:e}},w(b.prototype),i(b.prototype,r,function(){return this}),a.AsyncIterator=b,a.async=function(e,t,r,o,n){void 0===n&&(n=Promise);var i=new b(c(e,t,r,o),n);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(g),i(g,o,"Generator"),i(g,n,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),a.keys=function(e){var r=Object(e),o=[];for(var t in r)o.push(t);return o.reverse(),function e(){for(;o.length;){var t=o.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=O,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var o=this;function e(e,t){return i.type="throw",i.arg=r,o.next=e,t&&(o.method="next",o.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],i=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=u.call(n,"catchLoc"),c=u.call(n,"finallyLoc");if(a&&c){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&u.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=e,i.arg=t,n?(this.method="next",this.next=n.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;R(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},a}function asyncGeneratorStep(e,t,r,o,n,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function _asyncToGenerator(c){return function(){var e=this,a=arguments;return new Promise(function(t,r){var o=c.apply(e,a);function n(e){asyncGeneratorStep(o,t,r,n,i,"next",e)}function i(e){asyncGeneratorStep(o,t,r,n,i,"throw",e)}n(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(o){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(o);if(n){var r=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChromeCom=void 0;var ChromeCom,chromeFileAccessOverlayPromise,port,storageArea,ChromePreferences,ChromeExternalServices,_app=require("./app.js"),_app_options=require("./app_options.js"),_preferences=require("./preferences.js"),_download_manager=require("./download_manager.js"),_genericl10n=require("./genericl10n.js"),_generic_scripting=require("./generic_scripting.js");throw new Error('Module "pdfjs-web/chromecom" shall not be used outside CHROME build.');function getEmbedderOrigin(e){var t=window===top?location.origin:location.ancestorOrigins[0];"null"===t?getParentOrigin(e):e(t)}function getParentOrigin(e){ChromeCom.request("getParentOrigin",null,e)}function isAllowedFileSchemeAccess(e){ChromeCom.request("isAllowedFileSchemeAccess",null,e)}function isRuntimeAvailable(){try{var e;if(null!==(e=chrome.runtime)&&void 0!==e&&e.getManifest())return!0}catch(e){}return!1}function reloadIfRuntimeIsUnavailable(){isRuntimeAvailable()||location.reload()}function requestAccessToLocalFile(i,a,c){var e=null;top!==window&&(window.addEventListener("focus",reloadIfRuntimeIsUnavailable),e=function(){window.removeEventListener("focus",reloadIfRuntimeIsUnavailable),reloadIfRuntimeIsUnavailable(),a.close("chromeFileAccessOverlay")}),chromeFileAccessOverlayPromise||(chromeFileAccessOverlayPromise=a.register("chromeFileAccessOverlay",document.getElementById("chromeFileAccessOverlay"),e,!0)),chromeFileAccessOverlayPromise.then(function(){var e,t,r=chrome.runtime.getManifest().icons[48];document.getElementById("chrome-pdfjs-logo-bg").style.backgroundImage="url("+chrome.runtime.getURL(r)+")";var o={am:"ለፋይል ዩአርኤልዎች መዳረሻ ፍቀድ",ar:"‏السماح بالدخول إلى عناوين URL للملفات",bg:"Да се разреши достъп до URL адресите на файловете",bn:"ফাইল URLগুলিতে অ্যাক্সেস মঞ্জুর করুন",ca:"Permet l'accés als URL de fitxer",cs:"Umožnit přístup k adresám URL souborů",da:"Tillad adgang til webadresser på filer",de:"Zugriff auf Datei-URLs zulassen",el:"Να επιτρέπεται η πρόσβαση σε διευθύνσεις URL αρχείων","en-GB":"Allow access to file URLs",es:"Permitir acceso a URL de archivo","es-419":"Permitir el acceso a las URL del archivo",et:"Luba juurdepääs failide URL-idele",fa:"‏اجازهٔ دسترسی به URL های فایل",fi:"Salli tiedostojen URL-osoitteiden käyttö",fil:"Payagan ang access na mag-file ng mga URL",fr:"Autoriser l'accès aux URL de fichier",gu:"URL ફાઇલ કરવા ઍક્સેસની મંજૂરી આપો",hi:"फ़ाइल URL तक पहुंचने की अनुमति दें",hr:"Dozvoli pristup URL-ovima datoteke",hu:"Fájl URL-ekhez való hozzáférés engedélyezése",id:"Izinkan akses ke URL file",it:"Consenti l'accesso agli URL dei file",iw:"אפשר גישה לכתובות אתרים של קבצים",ja:"ファイルの URL へのアクセスを許可する",kn:"URL ಗಳನ್ನು ಫೈಲ್‌ಗಳಿಗೆ ಪ್ರವೇಶಿಸಲು ಅನುಮತಿಸಿ",ko:"파일 URL에 대한 액세스 허용",lt:"Leisti pasiekti failo URL",lv:"Atļaut piekļuvi faila vietrāžiem URL",ml:"URL കള്‍‌ ഫയല്‍‌ ചെയ്യുന്നതിന് ആക്‍സസ്സ് അനുവദിക്കുക",mr:"फाइल URL मध्ये प्रवेशास अनुमती द्या",ms:"Membenarkan akses ke URL fail",nl:"Toegang tot bestand-URL's toestaan",no:"Tillat tilgang til filnettadresser",pl:"Zezwalaj na dostęp do adresów URL plików","pt-BR":"Permitir acesso aos URLs do arquivo","pt-PT":"Permitir acesso a URLs de ficheiro",ro:"Permite accesul la adresele URL de fișiere",ru:"Разрешить открывать файлы по ссылкам",sk:"Povoliť prístup k webovým adresám súboru",sl:"Dovoli dostop do URL-jev datoteke",sr:"Дозволи приступ URL адресама датотека",sv:"Tillåt åtkomst till webbadresser i filen",sw:"Ruhusu kufikia URL za faili",ta:"கோப்பு  URLகளுக்கு அணுகலை அனுமதி",te:"ఫైల్ URLలకు ప్రాప్తిని అనుమతించు",th:"อนุญาตให้เข้าถึงไฟล์ URL",tr:"Dosya URL'lerine erişime izin ver",uk:"Надавати доступ до URL-адрес файлу",vi:"Cho phép truy cập vào các URL của tệp","zh-CN":"允许访问文件网址","zh-TW":"允許存取檔案網址"}[null===(e=(t=chrome.i18n).getUILanguage)||void 0===e?void 0:e.call(t)];o&&(document.getElementById("chrome-file-access-label").textContent=o);var n=document.getElementById("chrome-link-to-extensions-page");n.href="chrome://extensions/?id="+chrome.runtime.id,n.onclick=function(e){e.preventDefault(),ChromeCom.request("openExtensionsPageForFileAccess",{newTab:e.ctrlKey||e.metaKey||1===e.button||window!==top})},document.getElementById("chrome-url-of-local-file").textContent=i,document.getElementById("chrome-file-fallback").onchange=function(){var e=this.files[0];if(e){var t=decodeURIComponent(i.split("/").pop()),r=i;if(t!==e.name){var o="The selected file does not match the original file.\nOriginal: "+t+"\nSelected: "+e.name+"\nDo you want to open the selected file?";if(!confirm(o))return void(this.value="");r="file:///fakepath/to/"+encodeURIComponent(e.name)}c(URL.createObjectURL(e),e.size,r),a.close("chromeFileAccessOverlay")}},a.open("chromeFileAccessOverlay")})}function setReferer(e,r){var t;function o(e){if(e){var t=window.history.state||{};t.chromecomState=e,window.history.replaceState(t,"")}port.onDisconnect.removeListener(n),port.onMessage.removeListener(o),r()}function n(){port=null,r()}port||(port=chrome.runtime.connect({name:"chromecom-referrer"})),port.onDisconnect.addListener(n),port.onMessage.addListener(o),port.postMessage({referer:null===(t=window.history.state)||void 0===t?void 0:t.chromecomState,requestUrl:e})}