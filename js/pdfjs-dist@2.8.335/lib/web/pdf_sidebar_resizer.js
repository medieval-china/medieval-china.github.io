"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);var n=i.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PDFSidebarResizer=void 0;var SIDEBAR_WIDTH_VAR="--sidebar-width",SIDEBAR_MIN_WIDTH=200,SIDEBAR_RESIZING_CLASS="sidebarResizing",PDFSidebarResizer=function(){function o(e,t,i){var n=this;_classCallCheck(this,o),this.isRTL=!1,this.sidebarOpen=!1,this.doc=document.documentElement,this._width=null,this._outerContainerWidth=null,this._boundEvents=Object.create(null),this.outerContainer=e.outerContainer,this.resizer=e.resizer,this.eventBus=t,i.getDirection().then(function(e){n.isRTL="rtl"===e}),this._addEventListeners()}return _createClass(o,[{key:"outerContainerWidth",get:function(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}},{key:"_updateWidth",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=Math.floor(this.outerContainerWidth/2);return t<e&&(e=t),e<SIDEBAR_MIN_WIDTH&&(e=SIDEBAR_MIN_WIDTH),e!==this._width&&(this._width=e,this.doc.style.setProperty(SIDEBAR_WIDTH_VAR,"".concat(e,"px")),!0)}},{key:"_mouseMove",value:function(e){var t=e.clientX;this.isRTL&&(t=this.outerContainerWidth-t),this._updateWidth(t)}},{key:"_mouseUp",value:function(e){this.outerContainer.classList.remove(SIDEBAR_RESIZING_CLASS),this.eventBus.dispatch("resize",{source:this});var t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove),window.removeEventListener("mouseup",t.mouseUp)}},{key:"_addEventListeners",value:function(){var i=this,t=this._boundEvents;t.mouseMove=this._mouseMove.bind(this),t.mouseUp=this._mouseUp.bind(this),this.resizer.addEventListener("mousedown",function(e){0===e.button&&(i.outerContainer.classList.add(SIDEBAR_RESIZING_CLASS),window.addEventListener("mousemove",t.mouseMove),window.addEventListener("mouseup",t.mouseUp))}),this.eventBus._on("sidebarviewchanged",function(e){i.sidebarOpen=!(null==e||!e.view)}),this.eventBus._on("resize",function(e){if((null==e?void 0:e.source)===window&&(i._outerContainerWidth=null,i._width))if(i.sidebarOpen){i.outerContainer.classList.add(SIDEBAR_RESIZING_CLASS);var t=i._updateWidth(i._width);Promise.resolve().then(function(){i.outerContainer.classList.remove(SIDEBAR_RESIZING_CLASS),t&&i.eventBus.dispatch("resize",{source:i})})}else i._updateWidth(i._width)})}}]),o}();exports.PDFSidebarResizer=PDFSidebarResizer;