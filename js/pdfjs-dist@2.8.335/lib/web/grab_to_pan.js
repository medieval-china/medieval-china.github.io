"use strict";function GrabToPan(t){this.element=t.element,this.document=t.element.ownerDocument,"function"==typeof t.ignoreTarget&&(this.ignoreTarget=t.ignoreTarget),this.onActiveChanged=t.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}function isLeftMouseReleased(t){if("buttons"in t)return!(1&t.buttons);var e=window.chrome,n=e&&(e.webstore||e.app),i=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent);return!(!n&&!i)&&0===t.which}Object.defineProperty(exports,"__esModule",{value:!0}),(exports.GrabToPan=GrabToPan).prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(t){return t.matches("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(t){if(0===t.button&&!this.ignoreTarget(t.target)){if(t.originalTarget)try{t.originalTarget.tagName}catch(t){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=t.clientX,this.clientYStart=t.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),t.preventDefault(),t.stopPropagation();var e=document.activeElement;e&&!e.contains(t.target)&&e.blur()}},_onmousemove:function(t){if(this.element.removeEventListener("scroll",this._endPan,!0),isLeftMouseReleased(t))this._endPan();else{var e=t.clientX-this.clientXStart,n=t.clientY-this.clientYStart,i=this.scrollTopStart-n,s=this.scrollLeftStart-e;this.element.scrollTo?this.element.scrollTo({top:i,left:s,behavior:"instant"}):(this.element.scrollTop=i,this.element.scrollLeft=s),this.overlay.parentNode||document.body.appendChild(this.overlay)}},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}};