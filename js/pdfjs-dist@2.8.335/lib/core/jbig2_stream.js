"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Jbig2Stream=void 0;var _primitives=require("./primitives.js"),_stream=require("./stream.js"),_jbig=require("./jbig2.js"),_util=require("../shared/util.js"),Jbig2Stream=function(){function t(t,e,r,i){this.stream=t,this.maybeLength=e,this.dict=r,this.params=i,_stream.DecodeStream.call(this,e)}return t.prototype=Object.create(_stream.DecodeStream.prototype),Object.defineProperty(t.prototype,"bytes",{get:function(){return(0,_util.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))},configurable:!0}),t.prototype.ensureBuffer=function(t){},t.prototype.readBlock=function(){if(!this.eof){var t=new _jbig.Jbig2Image,e=[];if((0,_primitives.isDict)(this.params)){var r=this.params.get("JBIG2Globals");if((0,_primitives.isStream)(r)){var i=r.getBytes();e.push({data:i,start:0,end:i.length})}}e.push({data:this.bytes,start:0,end:this.bytes.length});for(var s=t.parseChunks(e),a=s.length,o=0;o<a;o++)s[o]^=255;this.buffer=s,this.bufferLength=a,this.eof=!0}},t}();exports.Jbig2Stream=Jbig2Stream;