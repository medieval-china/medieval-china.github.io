"use strict";!function(){var i={};function e(){return new Promise(function(e,t){"granted"===Notification.permission&&e("granted"),"Notification"in window||t("This browser does not support desktop notification"),Notification.requestPermission().then(function(i){"granted"===i?e(i):t(i)},t)})}i.init=function(){return Promise.all([new Promise(function(e,t){"serviceWorker"in navigator?navigator.serviceWorker.register("/lyNotify.sw.js",{scope:"./"}).then(function(i){(self.registration=i).showNotification?e(i):t({msg:"Your browser showNotification are not suppoerted"})},function(i){t({msg:"Service worker registration failed:",error:i})}):t({msg:"Service workers are not supported."})}),e()])},i.getPermission=e,i.stripHtml=function(i){return i.replace(/<img(?:\s+[^>]*)?>(.*?)(<\/img\s*>)?/gi,"[图片评论]").replace(/\n?\t?/gi,"").replace(/<\s+(?:\s+[^>]*)?>(.*?)<\/\s+\s*>/gi,"").replace(/<style(?:\s+[^>]*)?>(.*?)<\/style\s*>/gi,"").replace(/<exclude-tag(?:\s+[^>]*)?>(.*?)<\/exclude-tag\s*>/gi,"").replace(/<[^>]*>/gi,"").replace(/(\s+)/gi," ")},i.notify=function(i,e){var t=Object.assign({},{icon:"https://i.loli.net/2021/06/08/Dkgh3XHdLltwNKE.png"},e||{});return self.registration.showNotification(i,t)},window.lyNotify=i}();