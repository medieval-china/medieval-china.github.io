"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(v){function t(t,e,n){return n=u(e,n),this.on("click.pjax",t,function(t){var e=n;e.container||((e=v.extend({},n)).container=v(this).attr("data-pjax")),a(t,e)})}function a(t,e,n){n=u(e,n);var a=t.currentTarget,r=v(a);if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==a.protocol||location.hostname!==a.hostname||-1<a.href.indexOf("#")&&s(a)==s(location)||t.isDefaultPrevented())){var o={url:a.href,container:r.attr("data-pjax"),target:a},i=v.extend({},o,n),c=v.Event("pjax:click");r.trigger(c,[i]),c.isDefaultPrevented()||(y(i),t.preventDefault(),r.trigger("pjax:clicked",[i]))}}function e(t,e,n){n=u(e,n);var a=t.currentTarget,r=v(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var o={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:a};if("GET"!==o.type&&void 0!==window.FormData)o.data=new FormData(a),o.processData=!1,o.contentType=!1;else{if(r.find(":file").length)return;o.data=r.serializeArray()}y(v.extend({},o,n)),t.preventDefault()}function y(f){function d(t,e,n){n||(n={}),n.relatedTarget=f.target;var a=v.Event(t,n);return m.trigger(a,e),!a.isDefaultPrevented()}f=v.extend(!0,{},v.ajaxSettings,y.defaults,f),v.isFunction(f.url)&&(f.url=f.url());var h=b(f.url).hash,t=v.type(f.container);if("string"!==t)throw"expected string value for 'container' option; got "+t;var a,m=f.context=v(f.container);if(!m.length)throw"the container selector '"+f.container+"' did not match anything";f.data||(f.data={}),v.isArray(f.data)?f.data.push({name:"_pjax",value:f.container}):f.data._pjax=f.container,f.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",f.container),!d("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(a=setTimeout(function(){d("pjax:timeout",[t,f])&&t.abort("timeout")},e.timeout),e.timeout=0);var n=b(e.url);h&&(n.hash=h),f.requestUrl=l(n)},f.complete=function(t,e){a&&clearTimeout(a),d("pjax:complete",[t,e,f]),d("pjax:end",[t,f])},f.error=function(t,e,n){var a=T("",t,f),r=d("pjax:error",[t,e,n,f]);"GET"==f.type&&"abort"!==e&&r&&x(a.url)},f.success=function(t,e,n){var a=y.state,r="function"==typeof v.pjax.defaults.version?v.pjax.defaults.version():v.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=T(t,n,f),c=b(i.url);if(h&&(c.hash=h,i.url=c.href),r&&o&&r!==o)x(i.url);else if(i.contents){if(y.state={id:f.id||j(),url:i.url,title:i.title,container:f.container,fragment:f.fragment,timeout:f.timeout},(f.push||f.replace)&&window.history.replaceState(y.state,i.title,i.url),v.contains(m,document.activeElement))try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),d("pjax:beforeReplace",[i.contents,f],{state:y.state,previousState:a}),m.html(i.contents);var s=m.find("input[autofocus], textarea[autofocus]").last()[0];s&&document.activeElement!==s&&s.focus(),function(t){if(t){var r=v("script[src]");t.each(function(){var t=this.src,e=r.filter(function(){return this.src===t});if(!e.length){var n=document.createElement("script"),a=v(this).attr("type");a&&(n.type=a),n.src=v(this).attr("src"),document.head.appendChild(n)}})}}(i.scripts);var u=f.scrollTo;if(h){var l=decodeURIComponent(h.slice(1)),p=document.getElementById(l)||document.getElementsByName(l)[0];p&&(u=v(p).offset().top)}"number"==typeof u&&v(window).scrollTop(u),d("pjax:success",[t,e,n,f])}else x(i.url)},y.state||(y.state={id:j(),url:window.location.href,title:document.title,container:f.container,fragment:f.fragment,timeout:f.timeout},window.history.replaceState(y.state,document.title)),g(y.xhr),y.options=f;var e,n,r=y.xhr=v.ajax(f);return 0<r.readyState&&(f.push&&!f.replace&&(e=y.state.id,n=[f.container,w(m)],C[e]=n,D.push(e),S(A,0),S(D,y.defaults.maxCacheLength),window.history.pushState(null,"",f.requestUrl)),d("pjax:start",[r,f]),d("pjax:send",[r,f])),y.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return y(v.extend(n,u(t,e)))}function x(t){window.history.replaceState(null,"",y.state.url),window.location.replace(t)}function r(t){E||g(y.xhr);var e,n,a,r,o,i,c=y.state,s=t.state;if(s&&s.container){if(E&&P==s.url)return;if(c){if(c.id===s.id)return;e=c.id<s.id?"forward":"back"}var u=C[s.id]||[],l=u[0]||s.container,p=v(l),f=u[1];if(p.length){c&&(n=e,a=c.id,r=[l,w(p)],C[a]=r,i="forward"===n?(o=D,A):(o=A,D),o.push(a),(a=i.pop())&&delete C[a],S(o,y.defaults.maxCacheLength));var d=v.Event("pjax:popstate",{state:s,direction:e});p.trigger(d);var h={id:s.id,url:s.url,container:l,push:!1,fragment:s.fragment,timeout:s.timeout,scrollTo:!1};if(f){p.trigger("pjax:start",[null,h]),(y.state=s).title&&(document.title=s.title);var m=v.Event("pjax:beforeReplace",{state:s,previousState:c});p.trigger(m,[f,h]),p.html(f),p.trigger("pjax:end",[null,h])}else y(h);p[0].offsetHeight}else x(location.href)}E=!1}function o(t){var e=v.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=v("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(v("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r=t.data;if("string"==typeof r)v.each(r.split("&"),function(t,e){var n=e.split("=");a.append(v("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(v.isArray(r))v.each(r,function(t,e){a.append(v("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==_typeof(r)){var o;for(o in r)a.append(v("<input>",{type:"hidden",name:o,value:r[o]}))}v(document.body).append(a),a.submit()}function g(t){t&&t.readyState<4&&(t.onreadystatechange=v.noop,t.abort())}function j(){return(new Date).getTime()}function w(t){var e=t.clone();return e.find("script").each(function(){this.src||v._data(this,"globalEval",!1)}),e.contents()}function l(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function b(t){var e=document.createElement("a");return e.href=t,e}function s(t){return t.href.replace(/#.*/,"")}function u(t,e){return t&&e?((e=v.extend({},e)).container=t,e):v.isPlainObject(t)?t:{container:t}}function p(t,e){return t.filter(e).add(t.find(e))}function f(t){return v.parseHTML(t,document,!0)}function T(t,e,n){var a,r,o={},i=/<html/i.test(t),c=e.getResponseHeader("X-PJAX-URL");if(o.url=c?l(b(c)):n.requestUrl,i){r=v(f(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var s=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i);a=null!=s?v(f(s[0])):r}else a=r=v(f(t));if(0===r.length)return o;if(o.title=p(a,"title").last().text(),n.fragment){var u=r;"body"!==n.fragment&&(u=p(u,n.fragment).first()),u.length&&(o.contents="body"===n.fragment?u:u.contents(),o.title||(o.title=u.attr("title")||u.data("title")))}else i||(o.contents=r);return o.contents&&(o.contents=o.contents.not(function(){return v(this).is("title")}),o.contents.find("title").remove(),o.scripts=p(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=v.trim(o.title)),o}function S(t,e){for(;t.length>e;)delete C[t.shift()]}function i(){return v("meta").filter(function(){var t=v(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function c(){v.fn.pjax=t,v.pjax=y,v.pjax.enable=v.noop,v.pjax.disable=d,v.pjax.click=a,v.pjax.submit=e,v.pjax.reload=n,v.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:i},v(window).on("popstate.pjax",r)}function d(){v.fn.pjax=function(){return this},v.pjax=o,v.pjax.enable=c,v.pjax.disable=v.noop,v.pjax.click=v.noop,v.pjax.submit=v.noop,v.pjax.reload=function(){window.location.reload()},v(window).off("popstate.pjax",r)}var E=!0,P=window.location.href,h=window.history.state;h&&h.container&&(y.state=h),"state"in window.history&&(E=!1);var C={},A=[],D=[];v.event.props&&v.inArray("state",v.event.props)<0?v.event.props.push("state"):"state"in v.Event.prototype||v.event.addProp("state"),v.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),v.support.pjax?c():d()}(jQuery);